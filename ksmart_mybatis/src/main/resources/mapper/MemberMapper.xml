<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="kr.or.ksmart37.ksmart.mybatis.mapper.MemberMapper">
  <!-- 회원리스트  -->
  
 
  
  <select id="getMemberList" resultType="Member">
   	SELECT
		  m_id			AS memberId
		, m_pw			AS memberPw
		, m_name			AS memberName
		, m_level		AS memberLevel
		, m_email		AS memberEmail
		, m_addr			AS memberAddr
		, m_reg_date	AS memberRegDate
	FROM
		tb_member;	
  </select>
  <!-- 회원가입 -->
  <insert id="addMember" parameterType="Member">
  	INSERT INTO tb_member
	(m_id, m_pw, m_name, m_level, m_email, m_addr, m_reg_date)
	VALUES (
	<!--  
		#, $의 차이점!
		
		${memberId} = id001 > 값을 그대로 가져와 사용할 경우,
		#{memberId} = 'id001'> 어떠한 특정한 경우 치환할 경우
	-->
		#{memberId}, 
		#{memberPw}, 
		#{memberName}, 
		#{memberLevel}, 
		#{memberEmail}, 
		#{memberAddr}, 
		NOW());
  </insert>
  
  <!-- 업데이트  -->
  <select id="getMemberById" parameterType="String" resultType="Member">
  		SELECT
		  m_id			AS memberId
		, m_pw			AS memberPw
		, m_name			AS memberName
		, m_level		AS memberLevel
		, m_email		AS memberEmail
		, m_addr			AS memberAddr
		, m_reg_date	AS memberRegDate
	FROM
		tb_member
	WHERE 
		m_id=#{memberId};	
  </select>
    <!--  업데이트쿼리 -->
  <update id ="modifyMember" parameterType="Member">
  		UPDATE tb_member
	set
		m_pw= #{memberPw},
		m_name = #{memberName},
		m_level = #{memberLevel},
		m_email = #{memberEmail},
		m_addr = #{memberAddr},
		m_reg_date = now()
	WHERE 
		m_id = #{memberId};
  </update>
  
  <!-- 삭제처리 1 내가한거-->
  <delete id="deleteMember" parameterType="String">
  	DELETE 
  	FROM 
  		tb_member
  	WHERE 
  		m_id=#{memberId};
  </delete>
  
  <!-- 삭제처리 2 removeDelete -->
  <delete id="removeMember" parameterType="Member" >
  	DELETE 
  	FROM
  		tb_login
  	WHERE
  		login_id = #{memberId}
  		
  	DELETE   	
  	FROM
  		tb_order
  	WHERE
  		o_id = #{memberId}
  	
  	DELETE   	
  	FROM
  		tb_goods
  	WHERE
  		g_seller_id = #{memberId}
  		
  	DELETE   	
  	FROM 
  		tb_member  	
  	WHERE 
  		m_id=#{memberId};
  </delete>
  <!-- 삭제처리 removeDelete -->
   <delete id="removeLoginById" parameterType="String">
  	DELETE 
  	FROM
  		tb_login
  	WHERE
  		login_id = #{memberId};	
  </delete>
   <delete id="removeOrderById" parameterType="String">
  	DELETE 
  	FROM
  		tb_order
  	WHERE
  		o_id = #{memberId};	
  </delete>
   
   <delete id="removeGoodsById" parameterType="String">
  	DELETE 
  	FROM
  		tb_goods
  	WHERE
  		g_seller_id = #{memberId};	
  </delete>
     <delete id="removeMemberById" parameterType="String">
  	DELETE 
  	FROM
  		tb_member
  	WHERE
  		m_id = #{memberId};	
  </delete>
  

  
</mapper>